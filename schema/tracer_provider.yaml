type: object
additionalProperties: false
properties:
  processors:
    type: array
    minItems: 1
    items:
      $ref: "#/$defs/SpanProcessor"
    description: Configure span processors.
  limits:
    $ref: "#/$defs/SpanLimits"
    description: Configure span limits. See also attribute_limits.
  sampler:
    $ref: "#/$defs/Sampler"
    description: |
      Configure the sampler.
      If omitted, parent based sampler with a root of always_on is used.
  tracer_configurator/development:
    $ref: "#/$defs/ExperimentalTracerConfigurator"
    description: |
      Configure tracers.
required:
  - processors
$defs:
  BatchSpanProcessor:
    type: object
    additionalProperties: false
    properties:
      schedule_delay:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure delay interval (in milliseconds) between two consecutive exports. 
          Value must be non-negative.
          If omitted or null, 5000 is used.
      export_timeout:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure maximum allowed time (in milliseconds) to export data. 
          Value must be non-negative. A value of 0 indicates no limit (infinity).
          If omitted or null, 30000 is used.
      max_queue_size:
        type:
          - integer
          - "null"
        exclusiveMinimum: 0
        description: |
          Configure maximum queue size. Value must be positive.
          If omitted or null, 2048 is used.
      max_export_batch_size:
        type:
          - integer
          - "null"
        exclusiveMinimum: 0
        description: |
          Configure maximum batch size. Value must be positive.
          If omitted or null, 512 is used.
      exporter:
        $ref: "#/$defs/SpanExporter"
        description: Configure exporter.
    required:
      - exporter
  Sampler:
    type: object
    additionalProperties:
      type:
        - object
        - "null"
    minProperties: 1
    maxProperties: 1
    properties:
      always_off:
        $ref: "#/$defs/AlwaysOffSampler"
        description: Configure sampler to be always_off.
      always_on:
        $ref: "#/$defs/AlwaysOnSampler"
        description: Configure sampler to be always_on.
      composite/development:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configure sampler to be composite.
      jaeger_remote/development:
        $ref: "#/$defs/ExperimentalJaegerRemoteSampler"
        description: TODO
      parent_based:
        $ref: "#/$defs/ParentBasedSampler"
        description: Configure sampler to be parent_based.
      probability/development:
        $ref: "#/$defs/ExperimentalProbabilitySampler"
        description: Configure sampler to be probability.
      trace_id_ratio_based:
        $ref: "#/$defs/TraceIdRatioBasedSampler"
        description: Configure sampler to be trace_id_ratio_based.
    isSdkExtensionPlugin: true
  AlwaysOffSampler:
    type:
      - object
      - "null"
    additionalProperties: false
  AlwaysOnSampler:
    type:
      - object
      - "null"
    additionalProperties: false
  ExperimentalJaegerRemoteSampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      endpoint:
        type:
          - string
          - "null"
        description: TODO
      interval:
        type:
          - integer
          - "null"
        minimum: 0
        description: TODO
      initial_sampler:
        $ref: "#/$defs/Sampler"
        description: TODO
  ParentBasedSampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      root:
        $ref: "#/$defs/Sampler"
        description: |
          Configure root sampler.
          If omitted or null, always_on is used.
      remote_parent_sampled:
        $ref: "#/$defs/Sampler"
        description: |
          Configure remote_parent_sampled sampler.
          If omitted or null, always_on is used.
      remote_parent_not_sampled:
        $ref: "#/$defs/Sampler"
        description: |
          Configure remote_parent_not_sampled sampler.
          If omitted or null, always_off is used.
      local_parent_sampled:
        $ref: "#/$defs/Sampler"
        description: |
          Configure local_parent_sampled sampler.
          If omitted or null, always_on is used.
      local_parent_not_sampled:
        $ref: "#/$defs/Sampler"
        description: |
          Configure local_parent_not_sampled sampler.
          If omitted or null, always_off is used.
  ExperimentalProbabilitySampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      ratio:
        type:
          - number
          - "null"
        minimum: 0
        maximum: 1
        description: |
          Configure ratio.
          If omitted or null, 1.0 is used.
  TraceIdRatioBasedSampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      ratio:
        type:
          - number
          - "null"
        minimum: 0
        maximum: 1
        description: |
          Configure trace_id_ratio.
          If omitted or null, 1.0 is used.
  ExperimentalComposableAlwaysOffSampler:
    type:
      - object
      - "null"
    additionalProperties: false
  ExperimentalComposableAlwaysOnSampler:
    type:
      - object
      - "null"
    additionalProperties: false
  ExperimentalComposableParentBasedSampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      root:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configures the sampler for spans with no parent.
      remote_parent_sampled:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configures the sampler for spans with a remote parent that is sampled.
      remote_parent_not_sampled:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configures the sampler for spans with a remote parent that is not sampled.
      local_parent_sampled:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configures the sampler for spans with a local parent that is sampled.
      local_parent_not_sampled:
        $ref: "#/$defs/ExperimentalComposableSampler"
        description: Configures the sampler for spans with a local parent that is not sampled.
  ExperimentalComposableProbabilitySampler:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      ratio:
        type:
          - number
          - "null"
        minimum: 0
        maximum: 1
        description: |
          Configure ratio.
          If omitted or null, 1.0 is used.
  ExperimentalComposableSampler:
    type: object
    additionalProperties:
      type:
        - object
        - "null"
    minProperties: 1
    maxProperties: 1
    properties:
      always_off:
        $ref: "#/$defs/ExperimentalComposableAlwaysOffSampler"
        description: Configure sampler to be always_off.
      always_on:
        $ref: "#/$defs/ExperimentalComposableAlwaysOnSampler"
        description: Configure sampler to be always_on.
      parent_based:
        $ref: "#/$defs/ExperimentalComposableParentBasedSampler"
        description: Configure sampler to be parent_based.
      probability:
        $ref: "#/$defs/ExperimentalComposableProbabilitySampler"
        description: Configure sampler to be probability.
  SimpleSpanProcessor:
    type: object
    additionalProperties: false
    properties:
      exporter:
        $ref: "#/$defs/SpanExporter"
        description: Configure exporter.
    required:
      - exporter
  SpanExporter:
    type: object
    additionalProperties:
      type:
        - object
        - "null"
    minProperties: 1
    maxProperties: 1
    properties:
      otlp_http:
        $ref: common.yaml#/$defs/OtlpHttpExporter
        description: Configure exporter to be OTLP with HTTP transport.
      otlp_grpc:
        $ref: common.yaml#/$defs/OtlpGrpcExporter
        description: Configure exporter to be OTLP with gRPC transport.
      otlp_file/development:
        $ref: common.yaml#/$defs/ExperimentalOtlpFileExporter
        description: |
          Configure exporter to be OTLP with file transport.
      console:
        $ref: common.yaml#/$defs/ConsoleExporter
        description: Configure exporter to be console.
      zipkin:
        $ref: "#/$defs/ZipkinSpanExporter"
        description: Configure exporter to be zipkin.
    isSdkExtensionPlugin: true
  SpanLimits:
    type: object
    additionalProperties: false
    properties:
      attribute_value_length_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max attribute value size. Overrides .attribute_limits.attribute_value_length_limit. 
          Value must be non-negative.
          If omitted or null, there is no limit.
      attribute_count_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max attribute count. Overrides .attribute_limits.attribute_count_limit. 
          Value must be non-negative.
          If omitted or null, 128 is used.
      event_count_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max span event count. 
          Value must be non-negative.
          If omitted or null, 128 is used.
      link_count_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max span link count. 
          Value must be non-negative.
          If omitted or null, 128 is used.
      event_attribute_count_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max attributes per span event. 
          Value must be non-negative.
          If omitted or null, 128 is used.
      link_attribute_count_limit:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max attributes per span link. 
          Value must be non-negative.
          If omitted or null, 128 is used.
  SpanProcessor:
    type: object
    additionalProperties:
      type:
        - object
        - "null"
    minProperties: 1
    maxProperties: 1
    properties:
      batch:
        $ref: "#/$defs/BatchSpanProcessor"
        description: Configure a batch span processor.
      simple:
        $ref: "#/$defs/SimpleSpanProcessor"
        description: Configure a simple span processor.
    isSdkExtensionPlugin: true
  ZipkinSpanExporter:
    type:
      - object
      - "null"
    additionalProperties: false
    properties:
      endpoint:
        type:
          - string
          - "null"
        description: |
          Configure endpoint.
          If omitted or null, http://localhost:9411/api/v2/spans is used.
      timeout:
        type:
          - integer
          - "null"
        minimum: 0
        description: |
          Configure max time (in milliseconds) to wait for each export. 
          Value must be non-negative. A value of 0 indicates indefinite.
          If omitted or null, 10000 is used.
  ExperimentalTracerConfigurator:
    type:
      - object
    additionalProperties: false
    properties:
      default_config:
        $ref: "#/$defs/ExperimentalTracerConfig"
        description: Configure the default tracer config used there is no matching entry in .tracer_configurator/development.tracers.
      tracers:
        type: array
        minItems: 1
        items:
          $ref: "#/$defs/ExperimentalTracerMatcherAndConfig"
        description: Configure tracers.
  ExperimentalTracerMatcherAndConfig:
    type:
      - object
    additionalProperties: false
    properties:
      name:
        type:
          - string
        description: |
          Configure tracer names to match, evaluated as follows:

           * If the tracer name exactly matches.
           * If the tracer name matches the wildcard pattern, where '?' matches any single character and '*' matches any number of characters including none.
      config:
        $ref: "#/$defs/ExperimentalTracerConfig"
        description: The tracer config.
    required:
      - name
      - config
  ExperimentalTracerConfig:
    type:
      - object
    additionalProperties: false
    properties:
      disabled:
        type:
          - boolean
        description: Configure if the tracer is enabled or not.
